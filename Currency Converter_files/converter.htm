	var frCrExRs = {"usd":{"name":"U.S. Dollar","rate":"1","left":"$","decimals":"2"},"eur":{"name":"Euro","rate":"0.86092909655016","left":"\u20ac","decimals":"2"},"gbp":{"name":"U.K. Pound Sterling","rate":"0.77108579584671","left":"\u00a3","decimals":"2"},"aud":{"name":"Australian Dollar","rate":"1.39794957798","left":"A$ ","decimals":"2"},"cad":{"name":"Canadian Dollar","rate":"1.3139748449044","left":"C$ ","decimals":"2"},"jpy":{"name":"Japanese Yen","rate":"110.76970595757","left":"\u00a5","decimals":"0"},"chf":{"name":"Swiss Franc","rate":"0.96595117321746","left":"CHF ","decimals":"2"},"kmf":{"name":"\tComoro franc","rate":"421.21143117384","decimals":"0"},"afn":{"name":"Afghan afghani","rate":"73.209585815208","decimals":"2"},"all":{"name":"Albanian lek","rate":"108.37214752321","decimals":"2"},  "amba":{"name":"Ambazonia Dollar","rate":"4.000000000011","left":"$","decimals":"2"},"dzd":{"name":"Algerian Dinar","rate":"118.10703822167","decimals":"2"},"aoa":{"name":"Angolan kwanza","rate":"276.08208955223","decimals":"2"},"ars":{"name":"Argentine Peso","rate":"37.771912265582","left":"$","decimals":"2"},"amd":{"name":"Armenia Dram","rate":"481.95509606768"},"awg":{"name":"Aruban florin","rate":"1.7922197461486","decimals":"2"},"azn":{"name":"Azerbaijan Manat","rate":"1.6980025813984"},"bsd":{"name":"Bahamian Dollar","rate":"0.99102598446288","decimals":"2"},"bhd":{"name":"Bahrain Dinar","rate":"0.3757720491296","left":"BD ","decimals":"3","point":"."},"bdt":{"name":"Bangladeshi taka","rate":"83.459037969282","decimals":"2"},"bbd":{"name":"Barbadian Dollar","rate":"1.9983297542353","left":"Bds$ ","decimals":"2","point":"."},"byn":{"name":"Belarussian Ruble","rate":"2.1355279647881"},"bzd":{"name":"Belize dollar","rate":"1.9899413694798","decimals":"2"},"bob":{"name":"Bolivian Boliviano","rate":"6.8580022238693","left":"Bs. ","decimals":"2","point":"."},"bam":{"name":"Bosnia and Herzegovina convertible mark","rate":"1.6755740749128","decimals":"2"},"bwp":{"name":"Botswana Pula","rate":"10.943083696586","decimals":"2"},"brl":{"name":"Brazilian Real","rate":"4.0593257309105","left":"R$","decimals":"2"},"bnd":{"name":"Brunei Dollar","rate":"1.3745808780324","decimals":"2"},"bgn":{"name":"Bulgarian Lev","rate":"1.6833751139744","decimals":"2"},"bif":{"name":"Burundian franc","rate":"1752.4869729985","decimals":"0"},"khr":{"name":"Cambodian riel","rate":"4078.8313120177","decimals":"2"},"cve":{"name":"Cape Verde escudo","rate":"94.858974358974","decimals":"0"},"xaf":{"name":"Central African CFA Franc","rate":"566.85741038988","decimals":"2"},"xpf":{"name":"CFP Franc","rate":"102.15662450985","decimals":"2"},"clp":{"name":"Chilean Peso","rate":"685.59618852008","decimals":"2"},"cny":{"name":"Chinese Yuan","rate":"6.8417587159264","decimals":"2"},"cop":{"name":"Colombian Peso","rate":"3085.9083415552","decimals":"2"},"cdf":{"name":"Congolese franc","rate":"1625.4393673111","decimals":"2"},"crc":{"name":"Costa Rican Col\u00f3n","rate":"578.65927439402","left":"\u20a1","decimals":"2","point":"."},"hrk":{"name":"Croatian Kuna","rate":"6.3918026730483","decimals":"2"},"cup":{"name":"Cuban peso","rate":"0.99102598446288","decimals":"2"},"czk":{"name":"Czech Koruna","rate":"22.118525847455","right":" K\u010d","decimals":"2","point":"."},"dkk":{"name":"Danish Krone","rate":"6.4201690935636","left":"kr ","decimals":"2"},"djf":{"name":"Djiboutian franc","rate":"176.24219903768","decimals":"0"},"dop":{"name":"Dominican Peso","rate":"49.524765729583","left":"RD$ ","decimals":"2","point":"."},"xcd":{"name":"East Caribbean Dollar","rate":"2.6815743693824","decimals":"2"},"egp":{"name":"Egyptian Pound","rate":"17.850211740299","left":"E\u00a3","decimals":"2","point":"."},"ern":{"name":"Eritrean nakfa","rate":"14.923356192013","decimals":"2"},"etb":{"name":"Ethiopian birr","rate":"27.363165680473","decimals":"2"},"fjd":{"name":"Fiji Dollar","rate":"2.1046194106269","decimals":"2"},"gmd":{"name":"Gambian dalasi","rate":"48.741765480895","decimals":"2"},"gel":{"name":"Georgian lari","rate":"2.573923328463","decimals":"2"},"ghs":{"name":"Ghanaian Cedi","rate":"4.8302650476562","decimals":"2"},"gip":{"name":"Gibraltar pound","rate":"0.77304831160146","decimals":"2"},"gtq":{"name":"Guatemalan Quetzal","rate":"7.5284900284898","decimals":"2"},"gnf":{"name":"Guinean franc","rate":"8957.627118644","decimals":"0"},"gyd":{"name":"Guyanese dollar","rate":"206.87244869429","decimals":"2"},"htg":{"name":"Haitian gourde","rate":"68.256457564574","decimals":"2"},"hnl":{"name":"Honduran Lempira","rate":"23.821635544108","decimals":"2"},"hkd":{"name":"Hong Kong Dollar","rate":"7.8497160006663","left":"HK$ ","decimals":"2"},"huf":{"name":"Hungarian Forint","rate":"279.23759423108","decimals":"2"},"isk":{"name":"Icelandic Krona","rate":"111.37417469392","decimals":"2"},"inr":{"name":"Indian Rupee","rate":"71.806404216049","decimals":"2"},"idr":{"name":"Indonesian Rupiah","rate":"14840.024408186","decimals":"2"},"irr":{"name":"Iranian rial","rate":"41959.292285089","decimals":"2"},"iqd":{"name":"Iraqi dinar","rate":"1181.1941251596","decimals":"3"},"ils":{"name":"Israeli New Sheqel","rate":"3.5843559439216","left":"\u20aa","decimals":"2"},"jmd":{"name":"Jamaican Dollar","rate":"135.01824817518","decimals":"2"},"jod":{"name":"Jordanian Dinar","rate":"0.70625163640021","left":"JD","decimals":"3","point":"."},"kzt":{"name":"Kazakhstani Tenge","rate":"375.22916905548","decimals":"2"},"kes":{"name":"Kenyan shilling","rate":"99.741177104957","decimals":"2"},"kwd":{"name":"Kuwaiti Dinar","rate":"0.30248202416718","decimals":"2"},"kgs":{"name":"Kyrgyzstan Som","rate":"68.941321697643"},"lak":{"name":"Lao kip","rate":"8427.1070615032","decimals":"2"},"lbp":{"name":"Lebanese Pound","rate":"1504.3718717436","decimals":"2"},"lsl":{"name":"Lesotho loti","rate":"15.446764091858","decimals":"2"},"lrd":{"name":"Liberian dollar","rate":"155.44117647059","decimals":"2"},"lyd":{"name":"Libyan Dinar","rate":"0.77384844450933","decimals":"2"},"mop":{"name":"Macanese pataca","rate":"8.0023794073113","decimals":"2"},"mkd":{"name":"Macedonian denar","rate":"52.695676946085","decimals":"2"},"mga":{"name":"Malagasy ariary","rate":"3338.8989169674","decimals":"2"},"mwk":{"name":"Malawian kwacha","rate":"713.77580551803","decimals":"2"},"myr":{"name":"Malaysian Ringgit","rate":"4.145108761976","decimals":"2"},"mvr":{"name":"Maldivian rufiyaa","rate":"15.306164666942","decimals":"2"},"mru":{"name":"Mauritanian ouguiya","rate":"36.092682926829","decimals":"2"},"mur":{"name":"Mauritian Rupee","rate":"34.272397957475","decimals":"2"},"mxn":{"name":"Mexican Peso","rate":"19.181290497125","left":"Mex$ ","decimals":"2"},"mdl":{"name":"Moldova Lei","rate":"16.723084822422"},"mnt":{"name":"Mongolian togrog","rate":"2443.5270805812","decimals":"2"},"mad":{"name":"Moroccan Dirham","rate":"9.3610829959511","decimals":"2"},"mzn":{"name":"Mozambican metical","rate":"59.66935483871","decimals":"2"},"mmk":{"name":"Myanma Kyat","rate":"1531.25","decimals":"2"},"nad":{"name":"Namibian dollar","rate":"15.446764091858","decimals":"2"},"npr":{"name":"Nepalese Rupee","rate":"115.07009466196","decimals":"2"},"ang":{"name":"Neth. Antillean Guilder","rate":"1.8265527796978","decimals":"2"},"twd":{"name":"New Taiwan Dollar ","rate":"30.781890335086","decimals":"2"},"tmt":{"name":"New Turkmenistan Manat","rate":"3.4780149113381"},"nzd":{"name":"New Zealand Dollar","rate":"1.521204273186","left":"NZ$ ","decimals":"2"},"nio":{"name":"Nicaraguan C\u00f3rdoba","rate":"31.732729059829","left":"C$ ","decimals":"2","point":"."},"ngn":{"name":"Nigerian Naira","rate":"304.27026850032","left":"\u20a6"},"nok":{"name":"Norwegian Krone","rate":"8.4208797324069","left":"kr ","decimals":"2"},"omr":{"name":"Omani Rial","rate":"0.38123454245672","decimals":"2"},"pkr":{"name":"Pakistani Rupee","rate":"123.98575068777","left":"\u20a8 ","decimals":"2"},"pab":{"name":"Panamanian Balboa","rate":"0.99102598446288","decimals":"2"},"pgk":{"name":"Papua New Guinean kina","rate":"3.3193640281369","left":"K","decimals":"2"},"pyg":{"name":"Paraguayan Guaran\u00ed","rate":"5792.505090034","right":"\u20b2","decimals":"0","point":"."},"pen":{"name":"Peruvian Nuevo Sol","rate":"3.3216849922241","decimals":"2"},"php":{"name":"Philippine Peso","rate":"53.770057601718","decimals":"2"},"pln":{"name":"Polish Zloty","rate":"3.7055446138096","decimals":"2"},"qar":{"name":"Qatari Rial","rate":"3.6280278513288","decimals":"2"},"ron":{"name":"Romanian New Leu","rate":"3.9947589975715","decimals":"2"},"rub":{"name":"Russian Rouble","rate":"69.283803041996","decimals":"2"},"rwf":{"name":"Rwandan franc","rate":"871.90666980908","decimals":"0"},"svc":{"name":"Salvadoran colon","rate":"8.667994376757","decimals":"2"},"wst":{"name":"Samoan tala","rate":"2.5744606819763","decimals":"2"},"stn":{"name":"S\u00e3o Tom\u00e9 and Pr\u00edncipe Dobra","rate":"21.103822019395","decimals":"2"},"sar":{"name":"Saudi Riyal","rate":"3.7490331133432","decimals":"2"},"rsd":{"name":"Serbian Dinar","rate":"101.40058687409","decimals":"2"},"scr":{"name":"Seychelles rupee","rate":"13.472323379461","decimals":"2"},"sll":{"name":"Sierra Leonean leone","rate":"8313.4831460674","decimals":"2"},"sgd":{"name":"Singapore Dollar","rate":"1.3760133296428","left":"S$ ","decimals":"2"},"sbd":{"name":"Solomon Islands dollar","rate":"7.7395397489538","decimals":"2"},"sos":{"name":"Somali shilling","rate":"572.76668214894","decimals":"2"},"zar":{"name":"South African Rand","rate":"15.13504201169","left":"R ","decimals":"2"},"krw":{"name":"South Korean Won","rate":"1123.1643975648","left":"\u20a9","decimals":"2"},"ssp":{"name":"South Sudanese pound","rate":"146.54387007328","decimals":"2"},"lkr":{"name":"Sri Lanka Rupee","rate":"160.57554581362","decimals":"2"},"sdg":{"name":"Sudanese pound","rate":"17.820327552986","decimals":"2"},"srd":{"name":"Surinamese dollar","rate":"7.4004800960191","decimals":"2"},"szl":{"name":"Swazi lilangeni","rate":"15.446764091858","decimals":"2"},"sek":{"name":"Swedish Krona","rate":"9.0683559253162","left":"kr ","decimals":"2"},"syp":{"name":"Syrian pound","rate":"506.78082191779","decimals":"2"},"tjs":{"name":"Tajikistan Ruble","rate":"9.3729934346148"},"tzs":{"name":"Tanzanian shilling","rate":"2259.9266951741","decimals":"2"},"thb":{"name":"Thai Baht","rate":"32.795731777569","left":"\u0e3f","decimals":"2"},"top":{"name":"Tongan pa\u02bbanga","rate":"2.2487994650781","decimals":"2"},"ttd":{"name":"Trinidad Tobago Dollar","rate":"6.6729797979797","decimals":"2"},"tnd":{"name":"Tunisian Dinar","rate":"2.7641569862255","decimals":"2"},"try":{"name":"Turkish Lira","rate":"6.4318373883681","decimals":"2"},"aed":{"name":"U.A.E Dirham","rate":"3.6709073699202","decimals":"2"},"ugx":{"name":"Ugandan shilling","rate":"3736.8686868686","decimals":"0"},"uah":{"name":"Ukrainian Hryvnia","rate":"28.263801633984"},"uyu":{"name":"Uruguayan Peso","rate":"32.346015584982","left":"U$ ","decimals":"2","point":"."},"uzs":{"name":"Uzbekistan Sum","rate":"7799.3338216009"},"vuv":{"name":"Vanuatu vatu","rate":"112.17404487568","decimals":"2"},"vnd":{"name":"Vietnamese Dong","rate":"23393.125995222","right":"\u20ab","decimals":"0"},"xof":{"name":"West African CFA Franc","rate":"567.43239238087","decimals":"2"},"yer":{"name":"Yemeni rial","rate":"247.55754817987","decimals":"2"},"zmw":{"name":"Zambian kwacha","rate":"10.222437137331","decimals":"2"}};
//	var frForms = new Array();
	function frExCalc(inverseCalc) { 	}

	function frCalcRate(formObj, inverseCalc)
	{
		if (formObj) {
			// form exists and we can proceed
			var baseCurObj = formObj.base_currency;
			var targetCurObj = formObj.target_currency;
			var baseValueObj = formObj.base_value;
			var targetValueObj = formObj.target_value;
			if (baseCurObj && targetCurObj && baseValueObj && targetValueObj) {
				if (baseCurObj.type == "select-one") {
					var baseCurrency = baseCurObj.options[baseCurObj.selectedIndex].value.toLowerCase();
				} else {
					var baseCurrency = baseCurObj.value;
				}
				if (targetCurObj.type == "select-one") {
					var targetCurrency = targetCurObj.options[targetCurObj.selectedIndex].value.toLowerCase();
				} else {
					var targetCurrency = targetCurObj.value;
				}
				var targetExRate = frCrExRs[targetCurrency]["rate"] / frCrExRs[baseCurrency]["rate"];
				var targetValue = targetValueObj.value;
				var baseValue = baseValueObj.value;
	  
				if (inverseCalc) {			
					if (!targetValue || isNaN(targetValue)) {
						baseValueObj.value = "";
					} else {
						baseValueObj.value = frFormatNumber(targetValue / targetExRate, 2, ".", "");
					}
				} else {
					if (!baseValue || isNaN(baseValue)) {
						targetValueObj.value = ""; 
					} else {
						targetValueObj.value = frFormatNumber(baseValue * targetExRate, 2, ".", ""); 
					}
				}
			}
		}
	}

function frFormatNumber(numberValue, decimals, decimalPoint, thousandsSeparator)
{
	if (decimals == undefined) {
		decimals = 0;
	}
	if (thousandsSeparator == undefined) {
		thousandsSeparator = ",";
	}

	var numberParts = "";
	var roundValue = 1;
	for (var d = 0; d < decimals; d++) {
		roundValue *= 10;
	}
	numberValue = Math.round(numberValue * roundValue) / roundValue;
	var numberSign = "";
	if (numberValue < 0) {
		numberSign = "-";
		numberValue = Math.abs(numberValue);
	} 

	var numberText = new String(numberValue);
	var numberParts = numberText.split(".");
	var beforeDecimal = numberParts[0];
	var afterDecimal = "";
	numberText = "";
	if (numberParts.length == 2) {
		afterDecimal = numberParts[1];
	}
	while (beforeDecimal.length > 0) {
		if (beforeDecimal.length > 3) {
			numberText = thousandsSeparator + beforeDecimal.substring(beforeDecimal.length - 3, beforeDecimal.length) + numberText;
			beforeDecimal = beforeDecimal.substring(0, beforeDecimal.length - 3);
		} else {
			numberText = beforeDecimal + numberText;
			beforeDecimal = "";
		}
	}
	if (decimals > 0) {
		while (afterDecimal.length < decimals) {
			afterDecimal += "0";
		}
		if (decimalPoint == undefined) {
			decimalPoint = ".";
		}
		numberText += decimalPoint + afterDecimal;
	}
	numberText = numberSign + numberText;

	return numberText;
}

//document.getElementById("myBtn").addEventListener("click", function() {    myFunction(p1, p2);});

function frInit()
{
	// check all available forms on page 
	var frForms = new Array();
	var formIndex = "";
	var formObj = document.getElementById("frConverter");
	if (formObj) {
		// empty form exists
		frForms[frForms.length] = formObj;
	}

	formIndex = 1;
	formObj = document.getElementById("frConverter1");
	while (formObj) {
		frForms[frForms.length] = formObj;
		formIndex++;
		formObj = document.getElementById("frConverter" + formIndex);
	}

	var objs = document.getElementsByClassName("frConverter");
	for (var ob = 0; ob < objs.length; ob++) {
		formObj = objs[ob];
		if (formObj) {
			frForms[frForms.length] = formObj;
		}
	}
	

//if (form[i].type == "text" || form[i].type == "hidden" || form[i].type == "select-one") {

	// check link first and add it if it does not exists
	for (var f = 0; f < frForms.length; f++) {
		(function () {
			formObj = frForms[f];
			var passObj = formObj;
	  
			var isLink = true;
			var linkObj = document.getElementById("frLink");
			if (!linkObj) {
				objs = formObj.getElementsByClassName("frLink");
				if (objs && objs[0]) { linkObj = objs[0]; }
			}
			var linkHref = "";
			if (linkObj) {
				linkHref = linkObj.href;
			}
			var hrefRegex = /floatrates.com/i;
			if (!linkObj || !hrefRegex.exec(linkHref)) {
				isLink = false;
			} else {
				var linkTitle = linkObj.innerHTML.toLowerCase();
				var regex = /currency\s*converter|exchange\s*rates|convert/i;
				if (!regex.exec(linkTitle)) {
					isLink = false;
				}
			}
			if (!isLink) {
				formObj.innerHTML = formObj.innerHTML + ("<a id=\"frLink"+formIndex+"\" style=\"color:#777;font-size:10px;\" href=\"http://www.floatrates.com/\">Exchange Rates</a>");
			}
	  
	  
			// populate select box controls if they empty
			var selectedOpt = false;
			var totalOptions = 0;
			var baseCurObj = formObj.base_currency;
			var targetCurObj = formObj.target_currency;
			var baseValObj = formObj.base_value;
			var targetValObj = formObj.target_value;
			if (baseCurObj && baseCurObj.type == "select-one") {
				totalOptions = baseCurObj.options.length;
				if (totalOptions == 0) {
					var defaultBase = "";
					if (formObj.default_base) {
						defaultBase = formObj.default_base.value;
					}
					for (var curCode in frCrExRs) {
						if (defaultBase.toLowerCase() == curCode) {
							selectedOpt = true;
						} else {
							selectedOpt = false;
						}
						baseCurObj.options[baseCurObj.options.length] = new Option(frCrExRs[curCode]["name"], curCode);
						if (selectedOpt) {
							baseCurObj.options[baseCurObj.options.length - 1].selected = true;
						}
					}
				}
			}
			if (targetCurObj && targetCurObj.type == "select-one") {
				totalOptions = targetCurObj.options.length;
				if (totalOptions == 0) {
					var defaultTarget = "";
					if (formObj.default_target) {
						defaultTarget = formObj.default_target.value;
					}
					for (var curCode in frCrExRs) {
						if (defaultTarget.toLowerCase() == curCode) {
							selectedOpt = true;
						} else {
							selectedOpt = false;
						}
						targetCurObj.options[targetCurObj.options.length] = new Option(frCrExRs[curCode]["name"], curCode);
						if (selectedOpt) {
							targetCurObj.options[targetCurObj.options.length - 1].selected = true;
						}
					}
				}
			}
			// end populate controls
			// add events to currency controls
			if (baseCurObj) {
				baseCurObj.addEventListener("change", function() { frCalcRate(passObj, false); } );
				baseCurObj.addEventListener("keyup", function() { frCalcRate(passObj, false); } );
			}
			if (targetCurObj) {
				targetCurObj.addEventListener("change", function() { frCalcRate(passObj, false); } );
				targetCurObj.addEventListener("keyup", function() { frCalcRate(passObj, false); } );
			}
			if (baseValObj) {
				baseValObj.addEventListener("keyup", function() { frCalcRate(passObj, false); } );
			}
			if (targetValObj) {
				targetValObj.addEventListener("keyup", function() { frCalcRate(passObj, true); } );
			}
			// calculate initial rate
			frCalcRate(formObj, false);
		}())
	}

	var priceObjs = document.getElementsByClassName("frPrice");
	for (var p = 0; p < priceObjs.length; p++) {
		var priceObj = priceObjs[p];
		var priceValue = priceObj.getAttribute("data-value");
		var baseCurrency = priceObj.getAttribute("data-base");
		if (!baseCurrency) { baseCurrency = "usd"; }
		baseCurrency = baseCurrency.toLowerCase();
		var targetCurrency = priceObj.getAttribute("data-target");
		if (!targetCurrency) { targetCurrency = "usd"; }
		targetCurrency = targetCurrency.toLowerCase();
		if (priceValue && !isNaN(priceValue) && frCrExRs[baseCurrency] && frCrExRs[targetCurrency]) {
			var cLeft = ""; var cRight = ""; var cDecimals = ""; var cPoint = ""; var cSeparator = "";
			if (priceObj.hasAttribute("data-left") || priceObj.hasAttribute("data-right")) {
				if (priceObj.hasAttribute("data-left")) { cLeft = priceObj.getAttribute("data-left"); } 
				if (priceObj.hasAttribute("data-right")) { cRight = priceObj.getAttribute("data-right"); } 
			} else {
				if (frCrExRs[targetCurrency]["left"]) { cLeft = frCrExRs[targetCurrency]["left"]; } 
				if (frCrExRs[targetCurrency]["right"]) { cRight = frCrExRs[targetCurrency]["right"]; } 
			}
			if (priceObj.hasAttribute("data-decimals")) {
				cDecimals = priceObj.getAttribute("data-decimals");
			} else if (frCrExRs[targetCurrency]["decimals"]) {
				cDecimals = frCrExRs[targetCurrency]["decimals"];
			}
			if (priceObj.hasAttribute("data-point")) {
				cPoint = priceObj.getAttribute("data-point");
			} else if (frCrExRs[targetCurrency]["point"]) {
				cPoint = frCrExRs[targetCurrency]["point"];
			} else {
				cPoint = ".";
			}
			if (priceObj.hasAttribute("data-separator")) {
				cSeparator = priceObj.getAttribute("data-separator");
			} else if (frCrExRs[targetCurrency]["separator"]) {
				cSeparator = frCrExRs[targetCurrency]["separator"];
			}
			// show target value
			var targetRate = frCrExRs[targetCurrency]["rate"] / frCrExRs[baseCurrency]["rate"];
			priceObj.innerHTML = cLeft + frFormatNumber((priceValue*targetRate), cDecimals, cPoint, cSeparator) + cRight;
		}
	}

}

	frInit();
	//frExCalc();
